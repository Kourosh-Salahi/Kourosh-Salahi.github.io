<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CS180 Project 3A — Image Warping and Mosaicing</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0b1020;
      --card: #111836;
      --muted: #a0aec0;
      --ink: #e6eefc;
      --accent: #8ab4ff;
    }
    body { margin:0; font-family:Inter,system-ui,sans-serif; background:var(--bg); color:var(--ink); line-height:1.6; }
    .container { max-width:1100px; margin:0 auto; padding:20px; }
    header { padding:32px 20px; background:linear-gradient(to bottom,rgba(11,16,32,0.95),rgba(11,16,32,0.7)); border-bottom:1px solid rgba(255,255,255,0.08);}
    .brand { display:flex; align-items:center; gap:12px; }
    .brand .dot { width:10px; height:10px; border-radius:50%; background:var(--accent); }
    .brand h1 { font-size:18px; margin:0; font-weight:800; }
    nav { margin-left:auto; font-size:14px; display:flex; gap:12px; }
    nav a { color:var(--accent); text-decoration:none; }
    nav a:hover { text-decoration:underline; }
    .card { background:rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.08); border-radius:18px; padding:20px; margin-bottom:30px; }
    h2 { margin-top:0; }
    .hero-title { font-size:clamp(28px,4vw,44px); font-weight:800; margin:0 0 10px; }
    .subtitle { color:var(--muted); margin:0 0 10px; }
    .grid { display:grid; gap:16px; }
    .grid.two { grid-template-columns:repeat(2,1fr); }
    .grid.three { grid-template-columns:repeat(3,1fr); }
    .grid.four { grid-template-columns:repeat(4,1fr); }
    figure { margin:0; cursor:zoom-in; }
    img { width:100%; max-height:250px; object-fit:contain; border-radius:12px; border:1px solid rgba(255,255,255,0.08); }
    figcaption { font-size:14px; color:var(--muted); }
    pre { background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.08); padding:14px; border-radius:12px; overflow:auto; font-size:14px; }
    .lightbox { display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(7,10,22,0.9); z-index:1000; justify-content:center; align-items:center; padding:40px; }
    .lightbox img { max-width:90%; max-height:90%; border-radius:18px; box-shadow:0 20px 60px rgba(0,0,0,0.6); cursor:zoom-out; }
  </style>
</head>

<body>
  <header>
    <div class="container brand">
      <span class="dot"></span>
      <h1>CS180 · Project 3A</h1>
      <nav>
        <a href="#A1">A.1</a>
        <a href="#A2">A.2</a>
        <a href="#A3">A.3</a>
        <a href="#A4">A.4</a>
      </nav>
    </div>
  </header>

  <main class="container">

    <!-- Hero -->
    <section class="card">
      <h2 class="hero-title">Image Warping and Mosaicing</h2>
      <p class="subtitle">By <strong>Kourosh Salahi</strong> · CS180/280A: Computer Vision & Computational Photography</p>
      <p>The goal of this project is to compute homographies, perform custom image warping, and blend multiple photographs into seamless mosaics. This part focuses on implementing warping, resampling, and compositing from scratch.</p>
    </section>

    <!-- A.1 -->
    <section class="card" id="A1">
      <h2>A.1 — Shooting and Digitizing Pictures</h2>
      <p>Three sets of images were captured by rotating the camera about a fixed point to produce overlapping projective views. These serve as the base inputs for mosaicing.</p>
      <div class="grid.three">
        <figure><img src="./media/pan1_small.jpg" onclick="openLightbox(this.src)"><figcaption>Panorama — Left Image</figcaption></figure>
        <figure><img src="./media/pan2_small.jpg" onclick="openLightbox(this.src)"><figcaption>Panorama — Right Image</figcaption></figure>
        <figure><img src="./media/grimes1_small.jpg" onclick="openLightbox(this.src)"><figcaption>Grimes — Left Image</figcaption></figure>
        <figure><img src="./media/grimes2_small.jpg" onclick="openLightbox(this.src)"><figcaption>Grimes — Right Image</figcaption></figure>
        <figure><img src="./media/eng1_small.jpg" onclick="openLightbox(this.src)"><figcaption>Engineering — Left Image</figcaption></figure>
        <figure><img src="./media/eng2_small.jpg" onclick="openLightbox(this.src)"><figcaption>Engineering — Right Image</figcaption></figure>
      </div>
      <p><em>Each pair was shot with ~50% overlap to ensure stable correspondence estimation.</em></p>
    </section>

    <!-- A.2 -->
    <section class="card" id="A2">
      <h2>A.2 — Recovering Homographies</h2>
      <p>I implemented <code>computeH(im1_pts, im2_pts)</code> to estimate the homography via least-squares from manually selected point correspondences. Below are visualizations of the correspondences for two sets.</p>
      <div class="grid.two">
        <figure><img src="./media/eng_correspondence.png" onclick="openLightbox(this.src)"><figcaption>Engineering Correspondences</figcaption></figure>
        <figure><img src="./media/pan_correspondence.png" onclick="openLightbox(this.src)"><figcaption>Panorama Correspondences</figcaption></figure>
      </div>
      <p><em>Homographies were normalized to ensure stability. Using more than 4 points improved numerical accuracy.</em></p>
    </section>

    <!-- A.3 -->
    <section class="card" id="A3">
      <h2>A.3 — Warping Images</h2>
      <p>Using the recovered homography, I implemented inverse warping with both nearest-neighbor and bilinear interpolation. The examples below show rectification results for <em>Painting</em> and <em>Interstellar</em> images.</p>
      <div class="grid.two">
        <figure><img src="./media/painting_small.jpg" onclick="openLightbox(this.src)"><figcaption>Source — Painting</figcaption></figure>
        <figure><img src="./media/nn_painting.png" onclick="openLightbox(this.src)"><figcaption>Warped — Nearest Neighbor</figcaption></figure>
        <figure><img src="./media/bil_painting.png" onclick="openLightbox(this.src)"><figcaption>Warped — Bilinear</figcaption></figure>
      </div>
      <div class="grid.two">
        <figure><img src="./media/interstellar_small.jpg" onclick="openLightbox(this.src)"><figcaption>Source — Interstellar</figcaption></figure>
        <figure><img src="./media/nn_interstellar.png" onclick="openLightbox(this.src)"><figcaption>Warped — Nearest Neighbor</figcaption></figure>
        <figure><img src="./media/bil_interstellar.png" onclick="openLightbox(this.src)"><figcaption>Warped — Bilinear</figcaption></figure>
      </div>
      <p><em>Bilinear interpolation provides smoother intensity transitions, while nearest neighbor is faster but jagged. Both verify the correctness of inverse warping.</em></p>
    </section>

    <!-- A.4 -->
    <section class="card" id="A4">
      <h2>A.4 — Creating the Mosaic</h2>
      <p>Each pair of warped images was composited into a mosaic using alpha blending to reduce visible seams. The following results show the source images alongside their final mosaics.</p>
      <div class="grid.three">
        <figure><img src="./media/grimes1_small.jpg" onclick="openLightbox(this.src)"><figcaption>Grimes Left</figcaption></figure>
        <figure><img src="./media/grimes2_small.jpg" onclick="openLightbox(this.src)"><figcaption>Grimes Right</figcaption></figure>
        <figure><img src="./media/mosaic_grimes.png" onclick="openLightbox(this.src)"><figcaption>Grimes Mosaic</figcaption></figure>
      </div>

      <div class="grid.three">
        <figure><img src="./media/eng1_small.jpg" onclick="openLightbox(this.src)"><figcaption>Engineering Left</figcaption></figure>
        <figure><img src="./media/eng2_small.jpg" onclick="openLightbox(this.src)"><figcaption>Engineering Right</figcaption></figure>
        <figure><img src="./media/mosaic_eng.png" onclick="openLightbox(this.src)"><figcaption>Engineering Mosaic</figcaption></figure>
      </div>

      <div class="grid.three">
        <figure><img src="./media/pan1_small.jpg" onclick="openLightbox(this.src)"><figcaption>Panorama Left</figcaption></figure>
        <figure><img src="./media/pan2_small.jpg" onclick="openLightbox(this.src)"><figcaption>Panorama Right</figcaption></figure>
        <figure><img src="./media/mosaic_pan.png" onclick="openLightbox(this.src)"><figcaption>Panorama Mosaic</figcaption></figure>
      </div>
      <p><em>The feathered averaging reduces intensity seams and produces smooth transitions between overlapping regions.</em></p>
    </section>

    <!-- Conclusion -->
    <section class="card" id="conclusion">
      <h2>Conclusion</h2>
      <p>This project demonstrated how planar homographies enable perspective alignment between views and how blending creates seamless mosaics. Implementing inverse warping and interpolation from scratch deepened my understanding of geometric image transformations.</p>
      <p><strong>Thanks for viewing my project!</strong> — Kourosh Salahi</p>
    </section>

  </main>

  <div id="lightbox" class="lightbox" onclick="closeLightbox()">
    <img id="lightbox-img" src="" alt="">
  </div>

  <script>
    function openLightbox(src) {
      document.getElementById('lightbox-img').src = src;
      document.getElementById('lightbox').style.display = 'flex';
    }
    function closeLightbox() {
      document.getElementById('lightbox').style.display = 'none';
    }
  </script>
</body>
</html>
